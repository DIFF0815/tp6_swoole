<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="/socket.io-1.4.4.js"></script>
  <script src="/jquery-1.11.1.js"></script>
</head>
<body>

<div>
  <div>
    返回内容:
  </div>
  <div style="width: 300px;height: 100px" id="content">

  </div>
</div>
<div>
  在控制台中执行 socket.emit("test",{"asd":"我是内容"})
</div>
<div>
  在控制台中执行 socket.emit("join",{"room":"roomtest"})  加入房间
</div>
<div>
  在控制台中执行 socket.emit("leave",{"room":["roomtest"]})  离开房间
</div>
</br>
</br>
</br>
<div>
  消息：<input type="text" id="message">
  接收者：<input type="text" id="to">
  <button onclick="send()">发送</button>
</div>

<script>

  const socket = io('http://192.168.240.166:9501',{transports: ['websocket']});
  //xxx.com 这个自己替换成自己的环境thinkphp-swoole 的端口或者是nginx的代理端口
  //transports: ['websocket'] 一定要这个,改为websocket链接
  //polling 这个不支持,轮询会导致请求变成http请求,post请求全部拒接掉
  // socket.emit('test',{"asd":"asd"});
  // //自定义msg事件，发送‘你好服务器’字符串向服务器
  socket.on('testcallback',(data)=>{
    //监听浏览器通过msg事件发送的信息
    console.log('data',data);//你好浏览器
    //$('#content').append('1234'+'<br>');
    $('#content').append(JSON.stringify(data));
  });
  // socket.emit('join',{"asd":"asd"});
  // socket.on('roomJoin',(data)=>{
  //     console.log(data);//你好浏览器
  // })


  function send()
  {
    var message = document.getElementById('message').value;
    var to = document.getElementById('to').value;
    console.log("准备给" + to + "发送数据：" + message);

    socket.emit('sendUser',{
      to:to,
      message:message
    });

  }



</script>
</body>
</html>
